using bvData;
using bvUtils;
using bvAPI;

using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Test : MonoBehaviour
{

    public bvSystem system;
    public bvFaction[] factions;

    string data = "\"_id\": \"59e7a690d22c775be0fe1e4a\",\r\n      \"__v\": 0,\r\n      \"allegiance\": \"federation\",\r\n      \"conflicts\": [],\r\n      \"controlling_minor_faction\": \"mother gaia\",\r\n      \"controlling_minor_faction_cased\": \"Mother Gaia\",\r\n      \"controlling_minor_faction_id\": \"59e7a690d22c775be0fe1e50\",\r\n      \"eddb_id\": 17072,\r\n      \"factions\": [\r\n        {\r\n          \"name\": \"Federal Congress\",\r\n          \"name_lower\": \"federal congress\",\r\n          \"faction_id\": \"59e7a690d22c775be0fe1e4c\",\r\n          \"faction_details\": {\r\n            \"_id\": \"59e7a690d22c775be0fe1e4c\",\r\n            \"__v\": 0,\r\n            \"allegiance\": \"federation\",\r\n            \"eddb_id\": 588,\r\n            \"faction_presence\": {\r\n              \"system_name\": \"Sol\",\r\n              \"system_name_lower\": \"sol\",\r\n              \"system_id\": \"59e7a690d22c775be0fe1e4a\",\r\n              \"state\": \"none\",\r\n              \"influence\": 0.182182,\r\n              \"happiness\": \"none\",\r\n              \"active_states\": [],\r\n              \"pending_states\": [],\r\n              \"recovering_states\": [],\r\n              \"conflicts\": [],\r\n              \"updated_at\": \"2024-05-07T19:22:52.000Z\"\r\n            },\r\n            \"government\": \"democracy\",\r\n            \"name\": \"Federal Congress\",\r\n            \"name_lower\": \"federal congress\",\r\n            \"updated_at\": \"2024-05-07T19:22:52.000Z\"\r\n          }\r\n        },\r\n        {\r\n          \"name\": \"Sol Workers' Party\",\r\n          \"name_lower\": \"sol workers' party\",\r\n          \"faction_id\": \"59e7a690d22c775be0fe1e4e\",\r\n          \"faction_details\": {\r\n            \"_id\": \"59e7a690d22c775be0fe1e4e\",\r\n            \"__v\": 0,\r\n            \"allegiance\": \"federation\",\r\n            \"eddb_id\": 589,\r\n            \"faction_presence\": {\r\n              \"system_name\": \"Sol\",\r\n              \"system_name_lower\": \"sol\",\r\n              \"system_id\": \"59e7a690d22c775be0fe1e4a\",\r\n              \"state\": \"none\",\r\n              \"influence\": 0.203203,\r\n              \"happiness\": \"$faction_happinessband2;\",\r\n              \"active_states\": [],\r\n              \"pending_states\": [],\r\n              \"recovering_states\": [],\r\n              \"conflicts\": [],\r\n              \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n            },\r\n            \"government\": \"democracy\",\r\n            \"name\": \"Sol Workers' Party\",\r\n            \"name_lower\": \"sol workers' party\",\r\n            \"updated_at\": \"2024-05-07T19:52:51.000Z\"\r\n          }\r\n        },\r\n        {\r\n          \"name\": \"Sol Constitution Party\",\r\n          \"name_lower\": \"sol constitution party\",\r\n          \"faction_id\": \"59e7a690d22c775be0fe1e54\",\r\n          \"faction_details\": {\r\n            \"_id\": \"59e7a690d22c775be0fe1e54\",\r\n            \"__v\": 0,\r\n            \"allegiance\": \"federation\",\r\n            \"eddb_id\": 591,\r\n            \"faction_presence\": {\r\n              \"system_name\": \"Sol\",\r\n              \"system_name_lower\": \"sol\",\r\n              \"system_id\": \"59e7a690d22c775be0fe1e4a\",\r\n              \"state\": \"none\",\r\n              \"influence\": 0.137137,\r\n              \"happiness\": \"$faction_happinessband2;\",\r\n              \"active_states\": [],\r\n              \"pending_states\": [],\r\n              \"recovering_states\": [],\r\n              \"conflicts\": [],\r\n              \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n            },\r\n            \"government\": \"democracy\",\r\n            \"name\": \"Sol Constitution Party\",\r\n            \"name_lower\": \"sol constitution party\",\r\n            \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n          }\r\n        },\r\n        {\r\n          \"name\": \"Mother Gaia\",\r\n          \"name_lower\": \"mother gaia\",\r\n          \"faction_id\": \"59e7a690d22c775be0fe1e50\",\r\n          \"faction_details\": {\r\n            \"_id\": \"59e7a690d22c775be0fe1e50\",\r\n            \"__v\": 0,\r\n            \"allegiance\": \"federation\",\r\n            \"eddb_id\": 592,\r\n            \"faction_presence\": {\r\n              \"system_name\": \"Sol\",\r\n              \"system_name_lower\": \"sol\",\r\n              \"system_id\": \"59e7a690d22c775be0fe1e4a\",\r\n              \"state\": \"none\",\r\n              \"influence\": 0.323323,\r\n              \"happiness\": \"$faction_happinessband2;\",\r\n              \"active_states\": [],\r\n              \"pending_states\": [],\r\n              \"recovering_states\": [],\r\n              \"conflicts\": [],\r\n              \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n            },\r\n            \"government\": \"democracy\",\r\n            \"name\": \"Mother Gaia\",\r\n            \"name_lower\": \"mother gaia\",\r\n            \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n          }\r\n        },\r\n        {\r\n          \"name\": \"Sol Nationalists\",\r\n          \"name_lower\": \"sol nationalists\",\r\n          \"faction_id\": \"59e7a690d22c775be0fe1e56\",\r\n          \"faction_details\": {\r\n            \"_id\": \"59e7a690d22c775be0fe1e56\",\r\n            \"__v\": 0,\r\n            \"allegiance\": \"federation\",\r\n            \"eddb_id\": 593,\r\n            \"faction_presence\": {\r\n              \"system_name\": \"Sol\",\r\n              \"system_name_lower\": \"sol\",\r\n              \"system_id\": \"59e7a690d22c775be0fe1e4a\",\r\n              \"state\": \"none\",\r\n              \"influence\": 0.144144,\r\n              \"happiness\": \"$faction_happinessband2;\",\r\n              \"active_states\": [],\r\n              \"pending_states\": [],\r\n              \"recovering_states\": [],\r\n              \"conflicts\": [],\r\n              \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n            },\r\n            \"government\": \"democracy\",\r\n            \"name\": \"Sol Nationalists\",\r\n            \"name_lower\": \"sol nationalists\",\r\n            \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n          }\r\n        },\r\n        {\r\n          \"name\": \"Aegis Core\",\r\n          \"name_lower\": \"aegis core\",\r\n          \"faction_id\": \"59ed9e89d22c775be0e6ffcb\",\r\n          \"faction_details\": {\r\n            \"_id\": \"59ed9e89d22c775be0e6ffcb\",\r\n            \"__v\": 0,\r\n            \"allegiance\": \"independent\",\r\n            \"eddb_id\": 75779,\r\n            \"faction_presence\": {\r\n              \"system_name\": \"Sol\",\r\n              \"system_name_lower\": \"sol\",\r\n              \"system_id\": \"59e7a690d22c775be0fe1e4a\",\r\n              \"state\": \"none\",\r\n              \"influence\": 0.01001,\r\n              \"happiness\": \"$faction_happinessband2;\",\r\n              \"active_states\": [],\r\n              \"pending_states\": [],\r\n              \"recovering_states\": [],\r\n              \"conflicts\": [],\r\n              \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n            },\r\n            \"government\": \"cooperative\",\r\n            \"name\": \"Aegis Core\",\r\n            \"name_lower\": \"aegis core\",\r\n            \"updated_at\": \"2024-05-07T19:42:44.000Z\"\r\n          }\r\n        }\r\n      ],\r\n      \"government\": \"$government_democracy;\",\r\n      \"name\": \"Sol\",\r\n      \"name_lower\": \"sol\",\r\n      \"population\": 22780919531,\r\n      \"primary_economy\": \"$economy_refinery;\",\r\n      \"secondary_economy\": \"$economy_service;\",\r\n      \"security\": \"$system_security_high;\",\r\n      \"state\": \"none\",\r\n      \"system_address\": \"10477373803\",\r\n      \"updated_at\": \"2024-05-07T19:42:44.000Z\",\r\n      \"x\": 0,\r\n      \"y\": 0,\r\n      \"z\": 0,\r\n      \"name_aliases\": []\r\n";

    private void Start()
    {
        data = "{"+data+"}";
        system = bvSystem.fromJson(data);

        Debug.Log(system.factions[0].influence);

        //StartCoroutine(bvAPI.bvAPI.GetFactionData(new string[] { "The Archon Horde" }, Callback));
    }

    public void Callback(bvFaction[] factions)
    {
        Debug.Log("Success!");
        this.factions = factions;
    }
}
